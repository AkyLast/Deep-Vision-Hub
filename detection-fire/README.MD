# ğŸ”¥ Detection Fire â€“ Monitoramento Inteligente de IncÃªndios com YOLOv8 + OpenCV

![Build](https://img.shields.io/badge/build-ready-blue) ![Python](https://img.shields.io/badge/python-3.10+-blue) ![License](https://img.shields.io/badge/license-MIT-green)

**Detection Fire** Ã© um sistema inteligente de monitoramento visual que une **YOLOv8 (Ultralytics)** e **OpenCV** para detecÃ§Ã£o automÃ¡tica de focos de incÃªndio em vÃ­deos ou streams em tempo real.  
O sistema calcula a proporÃ§Ã£o do fogo em relaÃ§Ã£o Ã  cena e emite **alertas imediatos quando o fogo se torna descontrolado** (padrÃ£o: â‰¥ 5% do frame).  

ğŸš€ Projeto ideal para **pesquisa, POCs e aplicaÃ§Ãµes reais em seguranÃ§a**.

---

## ğŸ“‘ Ãndice

1. [Sobre o Projeto](#sobre-o-projeto)  
2. [TL;DR](#tldr)  
3. [DemonstraÃ§Ã£o](#demonstraÃ§Ã£o)  
4. [Estrutura do RepositÃ³rio](#-estrutura-do-repositÃ³rio)  
5. [Principais Funcionalidades](#-principais-funcionalidades)  
6. [Tecnologias](#-tecnologias)  
7. [ConfiguraÃ§Ã£o (`config.json`)](#-configuraÃ§Ã£o-configjson)  
8. [Como Executar](#-como-executar)  
9. [Como Funciona o Algoritmo](#-como-funciona-o-algoritmo-resumo-tÃ©cnico)  
10. [Trechos de CÃ³digo](#-trechos-de-cÃ³digo-Ãºteis)  
11. [Boas PrÃ¡ticas e ObservaÃ§Ãµes](#-boas-prÃ¡ticas-e-observaÃ§Ãµes)  
12. [Troubleshooting](#-troubleshooting-comum)  
13. [Melhorias Futuras / Roadmap](#-melhorias-futuras-roadmap)  
14. [LicenÃ§a](#-licenÃ§a)  
15. [Autor e Contato](#-autor)  

---

## Sobre o Projeto

**Problema:** incÃªndios podem se espalhar rapidamente e causar danos irreversÃ­veis. A maioria dos sistemas tradicionais depende de **sensores fÃ­sicos** (calor ou fumaÃ§a), que nem sempre sÃ£o eficientes em Ã¡reas abertas ou com grande circulaÃ§Ã£o.  

**SoluÃ§Ã£o:** um sistema baseado em visÃ£o computacional capaz de **detectar fogo em tempo real usando cÃ¢meras comuns**, identificar a proporÃ§Ã£o do incÃªndio e emitir alertas automÃ¡ticos antes que ele se torne incontrolÃ¡vel.  

**Finalidade:** oferecer uma alternativa acessÃ­vel, inteligente e escalÃ¡vel para empresas, condomÃ­nios, indÃºstrias e Ã¡reas pÃºblicas que precisam de **monitoramento preventivo** sem altos custos de infraestrutura.  
Diferencial: uso de **deep learning (YOLOv8)** aliado a processamento clÃ¡ssico em **OpenCV**, permitindo **detecÃ§Ã£o robusta, visualizaÃ§Ã£o amigÃ¡vel e fÃ¡cil integraÃ§Ã£o** com sistemas de notificaÃ§Ã£o ou dashboards de controle.  

---

## TL;DR

ğŸ¥ VÃ­deo â†’ ğŸ¤– YOLOv8 detecta fogo â†’ ğŸ“ cÃ¡lculo da Ã¡rea total â†’ ğŸ“Š proporÃ§Ã£o (%) do frame â†’ ğŸš¨ alerta visual se â‰¥ 5%.

---

## ğŸ¬ DemonstraÃ§Ã£o

O sistema em funcionamento, destacando a detecÃ§Ã£o de fogo e o alerta visual:

<p align="center">
  <img src="Sources/imgs/img.png" alt="DetecÃ§Ã£o de fogo 1" width="600">
</p>

<p align="center">
  <img src="Sources/imgs/img2.png" alt="DetecÃ§Ã£o de fogo 2" width="600">
</p>

---

## ğŸ“‚ Estrutura do RepositÃ³rio 

```

detection-fire/
â”‚â”€â”€ Sources/
â”‚   â”œâ”€â”€ video1.mp4          # VÃ­deo de teste 1
â”‚   â”œâ”€â”€ video2.mp4          # VÃ­deo de teste 2
â”‚   â”œâ”€â”€ video3.mp4          # VÃ­deo de teste 3
â”‚   â””â”€â”€ best.pt             # Modelo YOLOv8 customizado para detectar fogo
â”‚â”€â”€ main.py                 # Script principal do sistema
â”‚â”€â”€ requirements.txt
â”‚â”€â”€ README.md

````

---

## âœ¨ Principais Funcionalidades

* ğŸ¥ Leitura de vÃ­deo local ou adaptÃ¡vel para **cÃ¢mera/RTSP em tempo real**.  
* ğŸ¤– InferÃªncia com YOLOv8 usando `best.pt` (modelo customizado para fogo).  
* ğŸ“ CÃ¡lculo da Ã¡rea total do fogo e proporÃ§Ã£o relativa ao frame.  
* ğŸš¨ Alerta automÃ¡tico quando fogo â‰¥ 5% do frame (limiar configurÃ¡vel).  
* ğŸ¨ VisualizaÃ§Ã£o amigÃ¡vel com **CVZone** (legendas e placas estilizadas).  

---

## âš™ï¸ Tecnologias

* Python 3.10+  
* OpenCV (`opencv-python`)  
* Ultralytics YOLOv8 (`ultralytics`)  
* CVZone (`cvzone`)  
* NumPy (`numpy`)  

> ğŸ’¡ Para uso em GPU: instale versÃ£o do `ultralytics` compatÃ­vel com sua versÃ£o do CUDA e verifique se o `torch` possui suporte CUDA habilitado.

---

## âš™ï¸ ConfiguraÃ§Ã£o (`config.json`)

O arquivo `config.json` centraliza os parÃ¢metros que podem ser facilmente ajustados sem modificar o cÃ³digo.  
Exemplo de configuraÃ§Ã£o:

```json
{
    "videos_path": ["Sources/video1.mp4", "Sources/video2.mp4", "Sources/video3.mp4"],
    "model_path": "Sources/best.pt",
    "video_size": [1280, 720],
    "proporcao_min": 0.05
}
```

### ğŸ”§ Campos disponÃ­veis

* **`videos_path`**: lista de vÃ­deos ou streams que serÃ£o processados pelo sistema.
  *Pode incluir caminhos para arquivos locais (`.mp4`) ou Ã­ndices de cÃ¢mera (`0`, `1`, ...).*

* **`model_path`**: caminho do modelo YOLOv8 treinado (`.pt`).
  *Permite trocar facilmente o modelo sem alterar o cÃ³digo.*

* **`video_size`**: resoluÃ§Ã£o de saÃ­da do processamento `[largura, altura]`.
  *Ãštil para padronizar os frames e otimizar desempenho (reduzir tamanho melhora FPS em CPU).*

* **`proporcao_min`**: limiar mÃ­nimo da proporÃ§Ã£o de fogo em relaÃ§Ã£o ao frame para acionar o alerta.
  *Exemplo: `0.05` = 5% da Ã¡rea total do vÃ­deo.*

---

### ğŸ¯ Finalidade

Esse arquivo permite **personalizar a execuÃ§Ã£o** do sistema sem mexer no cÃ³digo-fonte.
Assim, vocÃª pode:

* Escolher diferentes vÃ­deos/cÃ¢meras;
* Alterar facilmente o modelo YOLOv8;
* Ajustar a resoluÃ§Ã£o para melhorar performance;
* Definir a sensibilidade do alerta conforme o ambiente monitorado.


---

## ğŸš€ Como Executar

1. Clone o repositÃ³rio:

```bash
git clone https://github.com/AkyLast/deep-vision-hub.git
cd detection-fire
````

2. Crie e ative um ambiente virtual:

```bash
python -m venv venv
# Linux / macOS
source venv/bin/activate
# Windows
venv\Scripts\Activate.ps1
```

3. Instale dependÃªncias:

```bash
pip install -r requirements.txt
# ou diretamente:
pip install ultralytics opencv-python cvzone numpy
```

4. Coloque `best.pt` em `Sources/` e vÃ­deos de teste tambÃ©m em `Sources/`.

5. Execute:

```bash
python main.py
```

* A janela principal se chamarÃ¡ **Monitoring**.
* Pressione **Q** para encerrar.

---

## ğŸ“– Como Funciona o Algoritmo (resumo tÃ©cnico)

1. **Leitura de frame** â†’ via `cv2.VideoCapture`.
2. **InferÃªncia YOLOv8** â†’ detecÃ§Ã£o de bounding boxes de fogo.
3. **CÃ¡lculo de Ã¡reas** â†’ largura Ã— altura das boxes.
4. **NormalizaÃ§Ã£o** â†’ soma das Ã¡reas dividido pela Ã¡rea total do frame (%).
5. **ClassificaÃ§Ã£o de risco**:

   * ğŸ”µ Seguro: `< 5%`
   * ğŸ”´ Alerta: `â‰¥ 5%`
6. **SaÃ­da visual** â†’ bounding boxes, porcentagem e mensagens de alerta via CVZone.

---

## ğŸ§© Trechos de CÃ³digo Ãšteis

```python
results = model(frame)[0]   # resultado do frame atual
boxes = results.boxes

frame_h, frame_w = frame.shape[:2]
frame_area = frame_h * frame_w

total_fire_area = 0
for box in boxes:
    x1, y1, x2, y2 = map(int, box.xyxy[0])
    area_box = (x2 - x1) * (y2 - y1)
    total_fire_area += area_box

proporcao_total = (total_fire_area / frame_area) * 100

if proporcao_total >= 5:
    putTextRect(frame, "ALERTA! FOGO DESCONTROLADO", (50,50), scale=2, offset=10,
                colorR=(0,0,255), colorT=(255,255,255))
```

---

## ğŸ› ï¸ Boas PrÃ¡ticas e ObservaÃ§Ãµes

* Calcule dimensÃµes sempre com `frame.shape`, evite hardcode.
* Aplique **filtro de confidence** (ex.: â‰¥ 0.3) para evitar falsos positivos.
* Considere **unir boxes sobrepostas** (IoU merge) para cÃ¡lculo de Ã¡rea mais fiel.
* Para **tempo real em CPU**, reduza resoluÃ§Ã£o antes da inferÃªncia.

---

## âœ… Troubleshooting (comum)

* `ModuleNotFoundError: No module named 'ultralytics'` â†’ instale `pip install ultralytics`.
* Modelo nÃ£o encontrado â†’ verifique `Sources/best.pt`.
* FPS baixo â†’ reduza resoluÃ§Ã£o ou rode em GPU (`model.to('cuda')`).
* Muitos falsos positivos â†’ refine dataset, aumente threshold ou adicione exemplos negativos.

---

## ğŸ”® Melhorias Futuras / Roadmap

* UniÃ£o/merge de bounding boxes para cÃ¡lculo de Ã¡rea mais preciso.
* InclusÃ£o de **detecÃ§Ã£o de fumaÃ§a** (multi-classe).
* OtimizaÃ§Ã£o para **Edge devices** (Raspberry Pi, Jetson) com quantizaÃ§Ã£o do modelo.
* IntegraÃ§Ã£o com **painel web em tempo real (WebSocket)**.
* Pipeline de mÃ©tricas (Precision, Recall, IoU, mAP) para validaÃ§Ã£o.
* PersistÃªncia em banco de dados + armazenamento de frames crÃ­ticos para anÃ¡lise futura.
* Testes unitÃ¡rios e integraÃ§Ã£o contÃ­nua (CI/CD).
* Sistema de envio de alerta automÃ¡timo para o WhatsApp, Telegram, SMS, etc.
* Trazer mais models para serem comparados.

---

## ğŸ“œ LicenÃ§a

Este projeto utiliza **MIT License**.
Consulte o arquivo `LICENSE` para mais detalhes.

---

## ğŸ‘¤ Autor

**Aky Last**
ğŸ”— [GitHub â€” AkyLast](https://github.com/AkyLast)

### Contato

* LinkedIn: [Luis Fernando Ribeiro Curvelo](https://www.linkedin.com/in/luis-fernando-ribeiro-curvelo/)
* Email: [luisribeiro.curvelo@gmail.com](mailto:luisribeiro.curvelo@gmail.com)

---
